/* assets/css/dashboard.css */
@layer pages {
  /* ───────── Root scope: ONLY the dashboard page ───────── */
  [data-rb-scope="main"][data-page="dashboard"]{
    --dash-gap: var(--rb-space-4);
    --dash-card-pad: var(--rb-space-4);
    --dash-kpi-icon-size: 36px;
  }

  /* ───────── Page header / hero ───────── */
  [data-rb-scope="main"][data-page="dashboard"] .hero h1{
    font-weight: 600;
    letter-spacing: .2px;
  }
  [data-rb-scope="main"][data-page="dashboard"] .hero .small{
    color: var(--rb-text-dim);
  }

  /* ───────── Utilities (local to dashboard) ───────── */
  [data-rb-scope="main"][data-page="dashboard"] .minw-150{ min-width:150px; }
  [data-rb-scope="main"][data-page="dashboard"] .minw-220{ min-width:220px; }
  [data-rb-scope="main"][data-page="dashboard"] .btn-action{
    height: 38px; border-radius: 10px;
  }

  /* ───────── KPI area ───────── */
  [data-rb-scope="main"][data-page="dashboard"] .kpi .card{
    background: var(--rb-card);
    border: 1px solid var(--rb-border);
    border-radius: var(--rb-radius);
    padding: 0;
    box-shadow: var(--rb-shadow-sm);
    transition: transform var(--rb-speed-fast) var(--rb-ease), box-shadow var(--rb-speed) var(--rb-ease);
  }
  [data-rb-scope="main"][data-page="dashboard"] .kpi .card:hover{
    transform: translateY(-2px);
    box-shadow: var(--rb-shadow);
  }
  [data-rb-scope="main"][data-page="dashboard"] .kpi .card-body{
    padding: var(--dash-card-pad);
  }
  [data-rb-scope="main"][data-page="dashboard"] .kpi .icon{
    width: var(--dash-kpi-icon-size);
    height: var(--dash-kpi-icon-size);
    display: grid; place-items: center;
    border-radius: 12px;
    background: color-mix(in oklab, var(--rb-bg-soft) 80%, #fff 20%);
    font-size: 18px;
  }
  /* Ensure links wrapping KPI cards look like cards */
  [data-rb-scope="main"][data-page="dashboard"] .kpi a.text-decoration-none{
    color: inherit;
  }

  /* ───────── Section headings ───────── */
  [data-rb-scope="main"][data-page="dashboard"] h3.h6{
    color: var(--rb-text-dim);
    text-transform: uppercase;
    letter-spacing: .08em;
  }

  /* ───────── Tables (Recent Orders / Top Items / Low Stock) ───────── */
  [data-rb-scope="main"][data-page="dashboard"] .card{
    background: var(--rb-card);
    border: 1px solid var(--rb-border);
    border-radius: var(--rb-radius);
  }
  [data-rb-scope="main"][data-page="dashboard"] .card-header{
    background: transparent;
    color: var(--rb-text);
  }
  [data-rb-scope="main"][data-page="dashboard"] .card-footer{
    background: transparent;
    color: var(--rb-text-dim);
  }

  /* Make table header stick inside card; guard horizontal overflow */
  [data-rb-scope="main"][data-page="dashboard"] .table-responsive{
    border-radius: var(--rb-radius);
    overflow: auto; /* enables sticky header behavior within */
  }
  [data-rb-scope="main"][data-page="dashboard"] table{
    color: var(--rb-text);
    background: var(--rb-card);
    border-color: var(--rb-border);
    width: 100%;
  }
  [data-rb-scope="main"][data-page="dashboard"] thead.table-light th{
    background: var(--rb-bg-soft);
    color: var(--rb-text);
    border-bottom: 1px solid var(--rb-border);
    position: sticky; top: 0; z-index: 1;
  }
  [data-rb-scope="main"][data-page="dashboard"] .table-soft tbody tr:nth-child(odd){
    background: var(--rb-table-stripe);
  }
  [data-rb-scope="main"][data-page="dashboard"] .table > :not(caption) > * > *{
    padding: 10px 12px;
    background-clip: padding-box;
  }
  [data-rb-scope="main"][data-page="dashboard"] .table-hover tbody tr:hover{
    background: color-mix(in oklab, var(--rb-table-stripe), #fff 2%);
  }
  [data-rb-scope="main"][data-page="dashboard"] .recent-orders td.text-end,
  [data-rb-scope="main"][data-page="dashboard"] .top-items   td.text-end,
  [data-rb-scope="main"][data-page="dashboard"] .low-stock   td.text-end{
    text-align: right;
  }

  /* Status badge spacing on legend (card footer) */
  [data-rb-scope="main"][data-page="dashboard"] .card-footer .badge{
    margin-right: 8px;
  }

  /* ───────── Filters row (dropdowns / search) ───────── */
  [data-rb-scope="main"][data-page="dashboard"] .form-select,
  [data-rb-scope="main"][data-page="dashboard"] .form-control{
    background: var(--rb-bg-soft);
    color: var(--rb-text);
    border: 1px solid var(--rb-border);
  }
  [data-rb-scope="main"][data-page="dashboard"] .form-select:focus,
  [data-rb-scope="main"][data-page="dashboard"] .form-control:focus{
    border-color: color-mix(in oklab, var(--rb-border), var(--rb-primary-600));
    box-shadow: 0 0 0 3px color-mix(in oklab, var(--rb-primary-600), transparent 70%);
  }

  /* ───────── Links styled to match theme (e.g., “View all”) ───────── */
  [data-rb-scope="main"][data-page="dashboard"] a.btn-outline-light{
    color: var(--rb-text); border-color: var(--rb-border);
    background: transparent;
  }
  [data-rb-scope="main"][data-page="dashboard"] a.btn-outline-light:hover{
    background: color-mix(in oklab, var(--rb-bg-soft) 85%, #fff 15%);
  }

  /* ───────── Responsive tweaks ───────── */
  @media (max-width: 1199px){
    [data-rb-scope="main"][data-page="dashboard"]{
      --dash-card-pad: var(--rb-space-3);
    }
    [data-rb-scope="main"][data-page="dashboard"] .kpi .icon{
      --dash-kpi-icon-size: 32px;
      font-size: 16px;
    }
  }
  @media (max-width: 767px){
    [data-rb-scope="main"][data-page="dashboard"] .hero .w-md-auto{
      width: 100% !important;
    }
    [data-rb-scope="main"][data-page="dashboard"] .minw-220{ min-width: 100%; }
  }

  /* ───────── Print (only dashboard content) ───────── */
  @media print{
    [data-rb-scope="main"][data-page="dashboard"] .btn,
    [data-rb-scope="main"][data-page="dashboard"] select,
    [data-rb-scope="main"][data-page="dashboard"] input{
      display: none !important;
    }
    [data-rb-scope="main"][data-page="dashboard"] .card,
    [data-rb-scope="main"][data-page="dashboard"] table{
      box-shadow: none !important;
      border-color: #bbb !important;
    }
  }
}
