/* -------------------------------------------------------
   RB Stores - Login Page Styles (responsive + accessible)
   File: login.css
   ------------------------------------------------------- */

/* Google Font (allowed by your CSP) */
@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap');

/* Root tokens */
:root{
  --bg-grad-start:#4f46e5;
  --bg-grad-end:#3b82f6;

  --card-bg:#ffffff;
  --text:#1f2937;
  --muted:#6b7280;

  --brand:#3b82f6;
  --brand-strong:#2563eb;

  --border:#e5e7eb;
  --border-strong:#d1d5db;

  --error:#ef4444;
  --error-bg:#fee2e2;
  --error-border:#fca5a5;

  --shadow-lg:0 12px 30px rgba(0,0,0,.18);
  --shadow-md:0 8px 24px rgba(0,0,0,.16);
  --shadow-sm:0 2px 10px rgba(0,0,0,.08);

  --radius-sm:10px;
  --radius-md:15px;
  --radius-lg:20px;

  --focus:#3b82f6;

  /* Safe areas */
  --safe-top: env(safe-area-inset-top, 0px);
  --safe-bottom: env(safe-area-inset-bottom, 0px);
}

/* Dark mode */
@media (prefers-color-scheme: dark){
  :root{
    --card-bg:#0b1220;
    --text:#e5e7eb;
    --muted:#9ca3af;

    --border:#1f2937;
    --border-strong:#334155;

    --shadow-lg:0 16px 40px rgba(0,0,0,.45);
    --shadow-md:0 12px 30px rgba(0,0,0,.40);
    --shadow-sm:0 6px 16px rgba(0,0,0,.25);

    --error-bg:#2c1414;
    --error-border:#ef4444;
  }
}

/* Global reset & base */
*,
*::before,
*::after{ box-sizing:border-box; }

html{ -webkit-text-size-adjust:100%; }

body{
  margin:0;
  min-height:100svh;
  display:flex;
  flex-direction:column;
  font-family:'Poppins',system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Cantarell,'Helvetica Neue',Arial,sans-serif;
  color:var(--text);
  background:
    radial-gradient(1400px 700px at 50% 0%, rgba(255,255,255,.06), transparent 55%),
    linear-gradient(135deg,var(--bg-grad-start),var(--bg-grad-end)) fixed;
  /* safe-area handled by header/footer */
  padding-top:0;
  padding-bottom:0;
}

/* Top Header */
.top-header{
  position: sticky;
  top: 0;
  z-index: 50;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:16px;
  padding: calc(var(--safe-top) + 10px) clamp(16px, 4vw, 40px) 14px;
  color:#fff;

  background: color-mix(in srgb, #0b1220 40%, transparent);
  backdrop-filter: saturate(120%) blur(6px);
  border-bottom: 1px solid rgba(255,255,255,.08);
  box-shadow: 0 4px 22px rgba(0,0,0,.25);
}

.top-header .logo h1{
  font-size:clamp(20px,2.4vw,28px);
  font-weight:800;
  line-height:1.1;
  margin:0;
}

.top-header .logo p{
  font-size:clamp(12px,1.6vw,14px);
  opacity:.95;
  margin:2px 0 0;
}

/* Top nav + links */
.top-nav{
  display:flex;
  align-items:center;
  gap:clamp(10px,2.2vw,24px);
  flex-wrap:nowrap;
}

.top-nav a{
  position:relative;        /* fix underline visibility */
  display:inline-flex;
  align-items:center;
  gap:8px;
  color:#fff;
  text-decoration:none;
  font-size: clamp(12px, 1.6vw, 14px);
  font-weight:600;
  padding: 8px 10px;
  border-radius:10px;
  transition: background .15s ease, transform .15s ease, color .15s ease;
  outline: none;
}
.top-nav a::after{
  content:"";
  position:absolute;
  left:0; right:0; bottom:-3px;
  height:2px;
  background:#fff;
  transform:scaleX(0);
  transform-origin:left;
  transition:transform .2s ease;
}
.top-nav a:hover::after,
.top-nav a:focus-visible::after{ transform:scaleX(1); }

/* Mobile menu toggle (CSP-friendly) */
.nav-toggle{
  display:none;
  background:transparent;
  border:1px solid rgba(255,255,255,.25);
  color:#fff;
  padding:8px 10px;
  border-radius:10px;
  font-weight:700;
  cursor:pointer;
}

/* Login Card */
.login-container{
  width:min(96%, 520px);
  margin-inline:auto;
  margin-top:clamp(24px, 6vh, 90px);
  margin-bottom:clamp(24px, 6vh, 60px);
  background:var(--card-bg);
  border-radius:var(--radius-md);
  box-shadow:var(--shadow-lg);
  padding:clamp(20px, 3.4vw, 40px) clamp(16px, 3.2vw, 32px);
  text-align:center;
  backdrop-filter:saturate(120%) blur(2px);
  color:#e9eef9;                /* improved contrast on dark card */
}

.login-container h2{
  font-size:clamp(20px,2.6vw,26px);
  font-weight:700;
  margin:0 0 8px 0;
}

.login-container p{
  color:#b9c2d3;                /* slightly brighter than --muted */
  font-size:clamp(13px,1.8vw,14px);
  margin:0 0 18px 0;
}

/* Role buttons */
.role-btns{
  display:flex;
  align-items:center;
  justify-content:center;
  gap:10px;
  margin-bottom:18px;
  flex-wrap:wrap;
}

.role-btns button{
  appearance:none;
  border:none;
  border-radius:999px;
  padding:12px clamp(18px,3vw,28px);
  font-size:clamp(14px,1.9vw,16px);
  font-weight:600;
  cursor:pointer;
  background:linear-gradient(135deg,#6366f1,#3b82f6);
  color:#fff;
  box-shadow:var(--shadow-sm);
  transition:transform .15s ease, filter .15s ease;
  letter-spacing:.2px;
}
.role-btns button:hover{ transform:translateY(-1px); }
.role-btns button:active{ transform:translateY(0); }

.role-btns button.active{
  background:linear-gradient(135deg,#4f46e5,#2563eb);
  filter:saturate(1.05);
}

.role-separator{ width:1px; height:28px; background:var(--border); }

/* Inputs */
.input-group{ position:relative; margin-bottom:16px; }

.input-group input{
  width:100%;
  border:1px solid var(--border-strong);
  border-radius:14px;
  padding:14px 44px 14px 14px;
  font-size:clamp(14px,1.9vw,15px);
  color:var(--text);
  background:transparent;
  box-shadow:inset 0 1px 2px rgba(0,0,0,.06);
  outline:none;
  transition:border-color .15s ease, box-shadow .15s ease, background .15s ease;
  caret-color: var(--brand);
}
.input-group input::placeholder{ color:#9ca3af; font-weight:400; }
.input-group input:focus{
  border-color:var(--focus);
  box-shadow:0 0 0 4px color-mix(in srgb, var(--focus) 25%, transparent);
  background:color-mix(in srgb, var(--focus) 6%, transparent);
}

/* Toggle password icon */
.toggle-password{
  position:absolute;
  right:12px;
  top:50%;
  transform:translateY(-50%);
  display:grid;
  place-items:center;
  width:32px; height:32px;
  border-radius:8px;
  cursor:pointer;
  outline:none;
}
.toggle-password svg{
  width:20px; height:20px;
  fill:#6b7280;
  transition:fill .15s ease, transform .15s ease;
}
.toggle-password:hover svg,
.toggle-password:focus-visible svg{
  fill:var(--brand);
  transform:scale(1.05);
}

/* Forgot password */
.forgot-password{ text-align:right; margin-bottom:16px; }
.forgot-password a{
  color:var(--brand);
  text-decoration:underline;
  text-underline-offset:2px;
  font-size:clamp(12px,1.8vw,13px);
  outline:none;
}
.forgot-password a:focus-visible{
  box-shadow:0 0 0 3px color-mix(in srgb, var(--brand) 25%, transparent);
  border-radius:6px;
}

/* Submit button */
.login-btn{
  width:100%;
  appearance:none;
  border:none;
  border-radius:999px;
  padding:14px clamp(18px,3vw,22px);
  font-size:clamp(15px,2vw,16px);
  font-weight:600;
  cursor:pointer;
  background:linear-gradient(135deg,#6366f1,#3b82f6);
  color:#fff;
  box-shadow:var(--shadow-md);
  transition:transform .15s ease, filter .15s ease, opacity .15s ease;
}
.login-btn:hover{ transform:translateY(-1px); }
.login-btn:active{ transform:translateY(0); }
.login-btn:focus-visible{
  outline:none;
  box-shadow:0 0 0 4px color-mix(in srgb, var(--brand) 28%, transparent), var(--shadow-md);
}
.login-btn:disabled{
  opacity:.7;
  cursor:not-allowed;
  filter:saturate(.85);
}

/* Error message */
.error-message{
  margin:12px auto 0;
  padding:10px 12px;
  width:100%;
  max-width:unset;
  color:var(--error);
  background:var(--error-bg);
  border:1px solid var(--error-border);
  border-radius:10px;
  font-size:clamp(13px,1.9vw,14px);
  font-weight:600;
  text-align:center;
  box-shadow:var(--shadow-sm);
}

/* Footer */
.footer{
  margin-top:auto;
  width:100%;
  color:#e8eefc;
  text-align:center;
  font-weight:600;
  letter-spacing:.2px;
  background: color-mix(in srgb, #0b1220 45%, transparent);
  backdrop-filter: saturate(120%) blur(6px);
  border-top:1px solid rgba(255,255,255,.10);
  box-shadow: 0 -6px 24px rgba(0,0,0,.25);
  line-height:1.35;

  padding: clamp(10px,1.8vh,16px) clamp(12px,3vw,24px);
  padding-bottom: calc(var(--safe-bottom) + 12px);
  font-size: clamp(12px,1.7vw,13px);
  border-top-left-radius: 0;
  border-top-right-radius: 0;
}

/* Focus rings (global safety) */
:focus-visible{
  outline:2px solid color-mix(in srgb, var(--focus) 60%, #fff);
  outline-offset:2px;
  border-radius:8px;
}

/* ---------------------------
   Mobile polish (≤ 640px)
   --------------------------- */
@media (max-width:640px){
  .nav-toggle{ display:inline-block; }

  /* Popover menu */
  .top-nav{
    position: absolute;
    right: clamp(12px,3vw,24px);
    top: calc(100% + 8px);
    display: grid;
    gap: 8px;
    padding: 10px;
    background: color-mix(in srgb, #0b1220 55%, transparent);
    border: 1px solid rgba(255,255,255,.10);
    border-radius: 12px;
    box-shadow: 0 10px 30px rgba(0,0,0,.35);
    backdrop-filter: saturate(120%) blur(6px);
    visibility: hidden;
    opacity: 0;
    transform: translateY(-6px);
    transition: opacity .15s ease, transform .15s ease, visibility .15s;
  }
  .top-header.nav-open .top-nav{
    visibility: visible;
    opacity: 1;
    transform: translateY(0);
  }
}

/* Mobile card refinements (≤ 540px) */
@media (max-width: 540px){
  .top-header{
    padding-left:14px;
    padding-right:14px;
    gap:6px;
  }
  .top-header .logo h1{ font-size: 18px; }
  .top-header .logo p{ font-size: 11px; }

  .login-container{
    width: 92%;
    max-width: 420px;
    margin: 16px auto;
    min-height: min(68vh, 520px);
    display: grid;
    align-content: start;
    row-gap: 10px;
    padding: 18px 16px 20px;
    border-radius: 12px;
    box-shadow: 0 10px 28px rgba(0,0,0,.35);
    background: rgba(10, 16, 27, .92);
    color: #e5e7eb;
  }
  .login-container h2{ font-size: 20px; margin-bottom: 2px; }
  .login-container p{ font-size: 12px; color: #b6bcc8; margin-bottom: 10px; }

  .role-btns{ margin-bottom: 12px; gap: 8px; }
  .role-btns button{
    padding: 12px 18px;
    font-size: 14px;
    min-height: 44px; /* WCAG tap size */
  }
  .role-separator{ display: none; }

  .input-group{ margin-bottom: 12px; }
  .input-group input{
    padding: 14px 44px 14px 14px;
    font-size: 16px;
    min-height: 46px;
    border-radius: 12px;
    background: #0f172a;
    border-color: #233046;
    color: #e5e7eb;
  }
  .input-group input::placeholder{ color: #8b93a7; }
  .toggle-password{ width: 36px; height: 36px; right: 8px; }

  .forgot-password{ margin: 4px 0 12px; text-align: left; }
  .forgot-password a{ font-size: 12px; }

  .login-btn{
    width: 100%;
    min-height: 48px;
    font-size: 16px;
    border-radius: 999px;
    margin-top: 2px;
  }

  .error-message{ font-size: 14px; padding: 10px 12px; }

  .footer{
    padding: 10px 12px;
    font-size: 11px;
    opacity: .9;
  }

  /* Better gradient on OLED, less banding */
  body{
    background:
      radial-gradient(1200px 600px at 50% -10%, rgba(255,255,255,.06), transparent 50%),
      linear-gradient(135deg, var(--bg-grad-start), var(--bg-grad-end)) fixed;
  }
}

/* Ultra-small phones (≤360px) — avoid overflow */
@media (max-width: 360px){
  .login-container{ width: 94%; padding: 16px 12px 18px; }
  .role-btns button{ padding: 11px 14px; font-size: 13px; }
  .input-group input{ font-size: 15px; }
}

/* One-handed comfort (short devices ≤700px height) */
@media (max-height: 700px){
  .login-container{
    margin-top: 10px;
    margin-bottom: 10px;
    min-height: auto;
  }
}

/* High-contrast helper (optional toggle via class on <body>) */
body.high-contrast{
  --bg-grad-start:#0b0b0b;
  --bg-grad-end:#1b1b1b;
  --card-bg:#000;
  --text:#fff;
  --muted:#d1d5db;
  --border:#333;
  --border-strong:#444;
  --focus:#fff;
}

/* Utility: hide-only (screen-reader text if needed) */
.sr-only{
  position:absolute;
  width:1px; height:1px;
  padding:0; margin:-1px;
  overflow:hidden;
  clip:rect(0,0,0,0);
  white-space:nowrap;
  border:0;
}
