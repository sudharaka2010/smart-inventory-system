/* ==========================================================================
   RB Stores — Sales Report (v5) — Brand Blue (#3b5683)
   - Scoped to #sales-report (no global collisions)
   - Uses dashboard tokens (dashboard.ext.css) with brandy fallbacks
   - 12-col responsive grid
   - Sidebar offset on desktop
   ========================================================================== */

/* ---------- Scope & tokens ---------- */
#sales-report{
  /* map to your dashboard tokens (with brand fallbacks) */
  --rb-bg:        #ffffff;                 /* page background stays white */
  --rb-card:      #ffffff;
  --rb-text:      #3b5683;                 /* brand text */
  --rb-muted:     #6b7c97;                 /* soft slate */
  --rb-border:    #dfe6f2;                 /* cool border */
  --rb-primary-1: #3b5683;                 /* brand primary */
  --rb-primary-2: #5a78a8;                 /* brand secondary tint */

  --bg:      var(--rb-bg);
  --panel:   var(--rb-card);
  --text:    var(--rb-text);
  --muted:   var(--rb-muted);
  --border:  var(--rb-border);
  --primary: var(--rb-primary-1);

  --r-xs: var(--rb-r-xs, 6px);
  --r:    var(--rb-r, 10px);
  --r-lg: var(--rb-r-lg, 12px);

  --sh-1: var(--rb-sh-1, 0 4px 10px rgba(34,54,82,.10));
  --sh-2: var(--rb-sh-2, 0 6px 16px rgba(34,54,82,.08));

  /* set your fixed sidebar width here (desktop) */
  --sr-sidebar-w: 260px;

  color: var(--text);
  background: transparent;
}
#sales-report *, #sales-report *::before, #sales-report *::after { box-sizing:border-box; }

/* ---------- Container ---------- */
#sales-report .sr-container{
  max-width: 1320px;
  margin: 0 auto;
  padding: 16px 16px 100px;  /* bottom padding prevents footer overlap */
  position: relative;
  z-index: 0;
}

/* Desktop: push content to the right of fixed sidebar */
@media (min-width: 992px){
  #sales-report .sr-container{
    max-width: none;
    width: calc(100% - var(--sr-sidebar-w));
    margin: 0;
    margin-left: var(--sr-sidebar-w);
    padding-left: 24px;
    padding-right: 24px;
  }
}
/* Mobile/tablet: centered */
@media (max-width: 991.98px){
  #sales-report .sr-container{
    max-width: 1320px;
    width: 100%;
    margin: 0 auto;
    padding-left: 16px;
    padding-right: 16px;
  }
}

/* ---------- Header (title + filters) ---------- */
#sales-report .sr-header{
  display:flex; flex-wrap:wrap; gap:12px; align-items:center; justify-content:space-between;
  background: linear-gradient(180deg, var(--panel) 0%, var(--panel) 65%, rgba(255,255,255,0) 100%);
  border:1px solid var(--border);
  border-radius: var(--r-lg);
  padding: 18px;
  box-shadow: var(--sh-1);
}
#sales-report .sr-header h2{ margin:0; font-size:22px; color:var(--text); }

#sales-report .sr-date-form{ display:flex; flex-wrap:wrap; gap:10px; align-items:end; }
#sales-report .sr-date-form label{
  font-size:12px; color:var(--muted);
  display:flex; flex-direction:column; gap:6px;
}
#sales-report .sr-date-form input[type="date"]{
  background:#fff; border:1px solid var(--border); color:var(--text);
  padding:10px 12px; border-radius: var(--r);
  min-width:170px; box-shadow: inset 0 1px 0 rgba(2,8,23,.05);
}
#sales-report .sr-date-form input[type="date"]:focus{
  outline: 3px solid rgba(59,86,131,.25);   /* brand ring */
  border-color: var(--primary);
}

/* ---------- Buttons ---------- */
#sales-report .sr-btn{
  display:inline-flex; align-items:center; gap:8px;
  padding:10px 14px; border-radius: var(--r);
  border:1px solid var(--border); background:#fff; color:var(--text);
  font-weight:600; cursor:pointer; text-decoration:none;
  transition: transform .06s ease, box-shadow .18s ease, background-color .18s ease, filter .18s ease;
  box-shadow: 0 1px 0 rgba(0,0,0,.02);
}
#sales-report .sr-btn:hover{ transform: translateY(-1px); box-shadow: var(--sh-1); background:#eef2f8; }
#sales-report .sr-btn:focus-visible{ outline:3px solid rgba(59,86,131,.25); outline-offset:2px; }
#sales-report .sr-primary{
  background: linear-gradient(145deg, var(--rb-primary-1), var(--rb-primary-2));
  color:#fff; border-color: transparent;
}
#sales-report .sr-primary:hover{ filter:brightness(1.05); }
#sales-report .sr-ghost{ background: transparent; border-color: transparent; color: var(--primary); }
#sales-report .sr-ghost:hover{ background: rgba(59,86,131,.06); }

/* ---------- 12-column grid sections ---------- */
#sales-report .sr-kpis,
#sales-report .sr-charts,
#sales-report .sr-tables{
  display:grid; gap:16px; grid-template-columns: repeat(12, minmax(0,1fr));
  margin-top:16px;
}
/* KPIs: 4 → 2 → 1 */
#sales-report .sr-kpis .sr-card{ grid-column: span 3; }
@media (max-width:1280px){ #sales-report .sr-kpis .sr-card{ grid-column: span 6; } }
@media (max-width:560px){  #sales-report .sr-kpis .sr-card{ grid-column: span 12; } }

/* Charts: 2 → 1 */
#sales-report .sr-charts .sr-card{ grid-column: span 6; }
@media (max-width:820px){ #sales-report .sr-charts .sr-card{ grid-column: span 12; } }

/* Tables: 2 → 1 */
#sales-report .sr-tables .sr-card{ grid-column: span 6; }
@media (max-width:820px){ #sales-report .sr-tables .sr-card{ grid-column: span 12; } }

/* ---------- Cards ---------- */
#sales-report .sr-card{
  background: var(--panel);
  color: var(--text);
  border-radius: var(--r-lg);
  padding: 14px 14px 10px;
  box-shadow: var(--sh-2);
  border:1px solid var(--border);
  display:flex; flex-direction:column; gap:6px;
  position: relative; z-index: 0;
}
#sales-report .sr-card-title{
  display:flex; align-items:center; justify-content:space-between;
  margin:0 0 6px 0; font-size:14px; font-weight:700; color:var(--text);
}
#sales-report .sr-card-value{ font-size:26px; font-weight:800; line-height:1.1; }
#sales-report .sr-card-sub{ font-size:12px; color: var(--muted); }

/* KPI equal height + subtle accent */
#sales-report .sr-kpis .sr-card{
  min-height: 116px;
  display:flex; flex-direction:column; justify-content:center;
  overflow:hidden;
}
#sales-report .sr-kpis .sr-card::after{
  content:""; position:absolute; inset:auto -28px -28px auto; width:160px; height:160px; border-radius:50%;
  background: radial-gradient(closest-side, rgba(59,86,131,.14), transparent 70%);  /* brand-tinted glow */
  pointer-events:none;
}

/* ---------- Charts (responsive, non-overlapping) ---------- */
#sales-report .sr-chart{ padding:16px; }
#sales-report .sr-chart-body{
  position:relative; aspect-ratio: 16 / 9; min-height:260px;
  z-index: 0; contain: paint;
}
@media (max-width: 980px){ #sales-report .sr-chart-body{ aspect-ratio: 4 / 3; } }
@media (max-width: 480px){ #sales-report .sr-chart-body{ aspect-ratio: 1 / 1; min-height: 220px; } }
#sales-report .sr-chart canvas{
  position:absolute; inset:0; width:100% !important; height:100% !important;
  z-index: 1; border-radius: 10px;
}

/* ---------- Tables ---------- */
#sales-report .sr-table-wrap{
  border:1px solid var(--border); border-radius: var(--r-lg);
  overflow:auto; background:#fff; z-index: 2; position: relative;
}
#sales-report table{ width:100%; border-collapse:separate; border-spacing:0; font-size:14px; min-width:520px; }
#sales-report thead th{
  position:sticky; top:0; z-index:3;
  background:#eef2f8; color:var(--text); text-align:left;
  padding:10px 12px; font-weight:600; border-bottom:1px solid var(--border);
}
@media (prefers-color-scheme: dark){
  #sales-report thead th{ background:#223652; color:#e8eef8; }
}
#sales-report tbody td{
  padding:10px 12px; border-bottom:1px solid #f1f5f9; color:var(--text);
}
#sales-report tbody tr:hover td{ background:#f6f9fc; }
#sales-report tbody tr:last-child td{ border-bottom:none; }
#sales-report .sr-muted{ color: var(--muted); text-align:center; }

/* Branded dark header variant (add class="sr-table sr-table--brand" to <table>) */
#sales-report .sr-table--brand thead th{
  background: #223652;          /* dark brand */
  color: #e8eef8;
  border-bottom-color: rgba(255,255,255,.08);
}

/* ---------- Export bar ---------- */
#sales-report .sr-export{ margin:18px 0 26px; text-align:right; }

/* ---------- Mobile polish ---------- */
@media (max-width:560px){
  #sales-report .sr-header h2{ font-size:20px; }
  #sales-report .sr-date-form input[type="date"]{ min-width:0; width:100%; }
}

/* ---------- Print tidy ---------- */
@media print{
  #sales-report .sr-charts .sr-card{ break-inside: avoid; }
  #sales-report .sr-container{ padding: 0; margin: 0; }
}
