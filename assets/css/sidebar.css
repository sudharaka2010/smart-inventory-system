/* ===================== RB Stores â€” FIXED Sidebar (STRICTLY SCOPED) =====================
   Scope guard: ONLY target inside [data-rb-scope="sidebar"] and #rbSidebar
   - Safe for Bootstrap 5.3.x
   - Offcanvas on mobile, FIXED rail on desktop (xl+)
   - Does NOT touch header.php / footer.php / main content
================================================================================== */

/* Fix: Remove white area by ensuring proper header height detection */
:root{ 
  --rb-header-h: 68px; /* Set your actual header height here */
}
[data-rb-scope="sidebar"]{ --rb-header-h: var(--rb-header-h); }

/* ---------- Theme tokens (scoped) ---------- */
[data-rb-scope="sidebar"]{
  --rb-sb-w: 280px;                 /* rail width on xl+ */
  --rb-header-h: 68px;              /* exact fixed header height */
  --rb-footer-h: 56px;              /* footer height if needed */

  --rb-sb-bg:#0f172a;               /* slate-900 */
  --rb-sb-bg-soft:#0b1222;          /* deeper */
  --rb-sb-text:#e5e7eb;             /* gray-200 */
  --rb-sb-text-dim:#9fb9e8;         /* soft blue-gray */
  --rb-sb-border:rgba(148,208,236,.28);
  --rb-sb-accent:#6375ff;           /* brand mid */
  --rb-sb-accent-2:#3b82f6;         /* blue */
  --rb-sb-hover:rgba(255,255,255,.06);
  --rb-sb-active:rgba(99,117,255,.16);
  --rb-sb-shadow:0 12px 30px rgba(0,0,0,.35);
  --rb-sb-radius:14px;
  --rb-sb-focus:0 0 0 3px rgba(99,117,255,.35);
  --rb-sb-divider:linear-gradient(90deg,transparent,rgba(148,208,236,.25),transparent);
}

/* ---------- Mobile Top Bar (shows only < xl) ---------- */
[data-rb-scope="sidebar"] .rb-sb-topbar{
  position: sticky; 
  top: 0; 
  z-index: 1030;
  display: flex; 
  align-items: center;
  height: 56px;
  padding: 0 .75rem;
  background: linear-gradient(180deg,var(--rb-sb-bg),var(--rb-sb-bg-soft));
  color: var(--rb-sb-text);
  border-bottom: 1px solid var(--rb-sb-border);
  box-shadow: 0 6px 16px rgba(0,0,0,.2);
}

[data-rb-scope="sidebar"] .rb-sb-topbar-btn{
  display: inline-flex; 
  align-items: center; 
  justify-content: center;
  width: 44px; 
  height: 44px; 
  border-radius: 12px;
  color: var(--rb-sb-text);
  background: transparent;
  border: 1px solid transparent;
}
[data-rb-scope="sidebar"] .rb-sb-topbar-btn:hover{ background: var(--rb-sb-hover); }
[data-rb-scope="sidebar"] .rb-sb-topbar-btn:focus-visible{ outline: none; box-shadow: var(--rb-sb-focus); }

/* ---------- Offcanvas shell (mobile behavior) ---------- */
#rbSidebar.offcanvas{
  background: var(--rb-sb-bg);
  color: var(--rb-sb-text);
  border-right: 1px solid var(--rb-sb-border);
}
#rbSidebar.offcanvas .offcanvas-header{
  border-bottom: 1px solid var(--rb-sb-border);
  background: var(--rb-sb-bg-soft);
  color: var(--rb-sb-text);
}
#rbSidebar.offcanvas .offcanvas-title{ font-weight: 600; }

/* ---------- Sidebar body/nav ---------- */
#rbSidebar .offcanvas-body{
  display: flex; 
  flex-direction: column;
  gap: .25rem;
  padding: 0 !important;
  background: var(--rb-sb-bg);
}

#rbSidebar .rb-sb-brand{
  color: var(--rb-sb-text);
  border-bottom: 1px solid var(--rb-sb-border);
  background: linear-gradient(180deg,var(--rb-sb-bg-soft),var(--rb-sb-bg));
}
#rbSidebar .rb-sb-brand .rb-sb-brand-text{
  font-weight: 700; 
  letter-spacing: .2px;
}

/* ---------- Accordion (menus) ---------- */
#rbSidebar .accordion{
  --bs-accordion-bg: transparent;
  --bs-accordion-color: var(--rb-sb-text);
  --bs-accordion-border-color: transparent;
  --bs-accordion-btn-padding-x: 1rem;
  --bs-accordion-btn-padding-y: .875rem;
  --bs-accordion-active-color: var(--rb-sb-text);
  --bs-accordion-btn-focus-box-shadow: 0 0 0 0 transparent;
}

#rbSidebar .rb-sb-acc-item{
  border: 0;
  border-bottom: 1px solid rgba(255,255,255,.03);
}

#rbSidebar .rb-sb-acc-btn{
  gap: .5rem;
  color: var(--rb-sb-text);
  background: transparent;
  border-radius: 0;
}
#rbSidebar .rb-sb-acc-btn.collapsed{ background: transparent; }
#rbSidebar .rb-sb-acc-btn:hover{ background: var(--rb-sb-hover); }
#rbSidebar .rb-sb-acc-btn:focus-visible{ outline: none; box-shadow: var(--rb-sb-focus); }

#rbSidebar .accordion-collapse{
  background: rgba(255,255,255,.01);
  transition: height .2s ease, transform .2s ease;
}

/* ---------- Link list inside sections ---------- */
#rbSidebar .rb-sb-menu{
  margin: 0; 
  padding: .375rem 0;
  display: grid; 
  gap: 2px;
}
#rbSidebar .rb-sb-link{
  display: flex; 
  align-items: center;
  padding: .625rem 1rem;
  gap: .5rem;
  color: var(--rb-sb-text);
  text-decoration: none;
  border-left: 2px solid transparent;
  border-radius: 8px;
}
#rbSidebar .rb-sb-link .bi{ font-size: 1rem; opacity: .9; }

#rbSidebar .rb-sb-link:hover{
  background: var(--rb-sb-hover);
  color: var(--rb-sb-text);
}
#rbSidebar .rb-sb-link:focus-visible{
  outline: none; 
  box-shadow: inset var(--rb-sb-focus);
}
#rbSidebar .rb-sb-link.active{
  background: var(--rb-sb-active);
  border-left-color: var(--rb-sb-accent);
  color: #fff;
}

/* ---------- Footer area ---------- */
#rbSidebar .rb-sb-footer{
  border-top: 1px solid var(--rb-sb-border);
  background: linear-gradient(0deg,var(--rb-sb-bg-soft),transparent);
}
#rbSidebar .rb-sb-footer .rb-sb-link{
  border-left-color: transparent !important;
}
#rbSidebar .rb-sb-footer .rb-sb-link:hover{ background: var(--rb-sb-hover); }

/* ---------- FIXED: Desktop rail mode (xl and up) ---------- */
@media (min-width: 1200px){
  /* FIXED rail that starts immediately below header - NO WHITE SPACE */
  #rbSidebar.offcanvas{
    position: fixed !important;
    top: var(--rb-header-h) !important;    /* Start exactly below header */
    left: 0 !important;
    z-index: 1029;

    transform: none !important;
    visibility: visible !important;
    transition: none !important;

    width: var(--rb-sb-w) !important;
    max-width: var(--rb-sb-w) !important;
    height: calc(100vh - var(--rb-header-h)) !important;  /* Fill remaining height */
    min-height: calc(100vh - var(--rb-header-h)) !important;

    box-shadow: var(--rb-sb-shadow);
    border-right: 1px solid var(--rb-sb-border);
    border-radius: 0 !important;
    background: var(--rb-sb-bg);
    
    /* Remove any margin/padding that could create white space */
    margin: 0 !important;
    padding: 0 !important;
  }

  /* Hide the offcanvas close header on desktop */
  #rbSidebar .offcanvas-header{ display: none !important; }

  /* Only the inside scrolls */
  #rbSidebar .offcanvas-body{
    height: 100%;
    overflow-y: auto;
    overflow-x: hidden;
    -webkit-overflow-scrolling: touch;
    /* Remove any padding that creates white space */
    padding: 0 !important;
    margin: 0 !important;
  }

  /* Hide the mobile top bar on desktop */
  [data-rb-scope="sidebar"] .rb-sb-topbar{ display: none !important; }
}

/* ---------- Dashboard Layout Fixes ---------- */

/* FIXED: Proper main content positioning */
@media (min-width: 1200px){
  main{
    margin-left: var(--rb-sb-w) !important;
    width: calc(100% - var(--rb-sb-w)) !important;
    min-height: calc(100vh - var(--rb-header-h)) !important;
    box-sizing: border-box;
    padding: 1rem 1.5rem !important; /* Better spacing */
  }
}

/* Mobile: full width */
@media (max-width: 1199.98px){
  main{ 
    margin-left: 0 !important; 
    width: 100% !important;
    padding: 1rem !important;
  }
}