/* ===================== RB Stores â€” Sidebar (STRICTLY SCOPED) =====================
   Scope guard: ONLY target inside [data-rb-scope="sidebar"] and #rbSidebar
   - Offcanvas on mobile, FIXED rail on desktop (xl+)
   - Reads shared layout tokens from :root set by header/footer
   - Does NOT touch header.php / footer.php / main content
================================================================================== */

/* ---------- Theme & layout tokens (scoped) ---------- */
[data-rb-scope="sidebar"]{
  /* Layout (read from :root; provide safe fallbacks) */
  --rb-header-h: var(--rb-header-h, 68px);
  --rb-footer-h: var(--rb-footer-h, 56px);
  --rb-sb-w: var(--rb-sidebar-w, 280px);

  /* Colors */
  --rb-sb-bg:#0f172a;               /* slate-900 */
  --rb-sb-bg-soft:#0b1222;          /* deeper */
  --rb-sb-text:#e5e7eb;             /* gray-200 */
  --rb-sb-text-dim:#9fb9e8;         /* soft blue-gray */
  --rb-sb-border:rgba(148,208,236,.28);
  --rb-sb-hover:rgba(255,255,255,.06);
  --rb-sb-active:rgba(99,117,255,.16);

  /* Shape / effects */
  --rb-sb-radius:14px;
  --rb-sb-shadow:0 12px 30px rgba(0,0,0,.35);
  --rb-sb-focus:0 0 0 3px rgba(99,117,255,.35);
}

/* Safety: prevent tiny horizontal scroll caused by offcanvas transforms */
html, body { overflow-x: hidden; }

/* ---------- Mobile top bar (hamburger row) ---------- */
[data-rb-scope="sidebar"] .rb-sb-topbar{
  position: sticky;
  top: var(--rb-header-h);
  z-index: 998;
  display: flex; align-items: center;
  padding: .35rem .75rem;
  background: var(--rb-sb-bg);
  color: var(--rb-sb-text);
  border-bottom: 1px solid var(--rb-sb-border);
}
[data-rb-scope="sidebar"] .rb-sb-topbar-btn{
  color: var(--rb-sb-text);
  border-radius: .75rem;
  line-height: 1;
}
[data-rb-scope="sidebar"] .rb-sb-topbar-btn:focus{
  outline: none; box-shadow: var(--rb-sb-focus);
}

/* ---------- Offcanvas (mobile) + Fixed Rail (desktop) ---------- */
#rbSidebar.offcanvas{
  background: var(--rb-sb-bg);
  color: var(--rb-sb-text);
  border-right: 1px solid var(--rb-sb-border);
}

/* Desktop rail behavior (xl and up) */
@media (min-width: 1200px){
  #rbSidebar.offcanvas{
    position: fixed;
    /* Make it a true left rail */
    transform: none !important;
    visibility: visible !important;
    /* Pin between header and footer */
    inset: var(--rb-header-h) auto var(--rb-footer-h) 0;
    width: var(--rb-sb-w);
    border-right: 1px solid var(--rb-sb-border);
    box-shadow: var(--rb-sb-shadow);
  }
  /* Hide offcanvas header chrome on desktop */
  #rbSidebar .offcanvas-header{ display:none !important; }
}

/* Optional soft shadow for the offcanvas on mobile */
.offcanvas-shadow{ box-shadow: var(--rb-sb-shadow); }

/* ---------- Brand row (optional; controlled in PHP) ---------- */
[data-rb-scope="sidebar"] .rb-sb-brand{
  background: transparent;
  color: var(--rb-sb-text);
  border-bottom: 1px solid transparent;
}
[data-rb-scope="sidebar"] .rb-sb-brand-text{
  font-weight: 600;
  color: var(--rb-sb-text);
}

/* ---------- Accordion reset (Bootstrap-friendly) ---------- */
[data-rb-scope="sidebar"] .rb-sb-acc-item{
  background: transparent;
  border: 0;
}
[data-rb-scope="sidebar"] .rb-sb-acc-btn{
  display: flex; align-items: center;
  gap: .5rem;
  background: transparent;
  color: var(--rb-sb-text);
  font-weight: 600;
  border: 0;
  box-shadow: none;
  padding: .85rem 1rem;
}
[data-rb-scope="sidebar"] .rb-sb-acc-btn:not(.collapsed){
  color: var(--rb-sb-text);
  background: rgba(255,255,255,.03);
}
[data-rb-scope="sidebar"] .rb-sb-acc-btn:focus{
  outline: none; box-shadow: var(--rb-sb-focus);
}
[data-rb-scope="sidebar"] .accordion-button::after{
  filter: invert(88%) sepia(6%) saturate(500%) hue-rotate(180deg) brightness(96%) contrast(90%);
}

/* Accordion body */
[data-rb-scope="sidebar"] .accordion-body{
  background: transparent;
  padding: .35rem .5rem .75rem .5rem;
}

/* ---------- Link list ---------- */
[data-rb-scope="sidebar"] .rb-sb-menu{
  margin: 0; padding: .25rem;
}
[data-rb-scope="sidebar"] .rb-sb-link{
  display: flex; align-items: center; gap: .5rem;
  padding: .6rem .85rem;
  margin: .125rem .15rem;
  color: var(--rb-sb-text);
  text-decoration: none;
  border-radius: 10px;
  line-height: 1.2;
  transition: background .18s ease, color .18s ease, transform .06s ease;
}
[data-rb-scope="sidebar"] .rb-sb-link:hover{
  background: var(--rb-sb-hover);
}
[data-rb-scope="sidebar"] .rb-sb-link:focus{
  outline: none; box-shadow: var(--rb-sb-focus);
}
[data-rb-scope="sidebar"] .rb-sb-link.active{
  background: var(--rb-sb-active);
}
[data-rb-scope="sidebar"] .rb-sb-link i{
  opacity: .95;
}

/* ---------- Sidebar footer area (logout) ---------- */
[data-rb-scope="sidebar"] .rb-sb-footer{
  border-top: 1px solid var(--rb-sb-border);
  background: linear-gradient(180deg, transparent, rgba(255,255,255,.02));
}
@media (min-width: 1200px){
  /* On desktop, ensure footer sits above page footer space */
  [data-rb-scope="sidebar"] .rb-sb-footer{
    padding-bottom: .75rem;
  }
}

/* ---------- Scrollbar styling (WebKit only; safe cosmetic) ---------- */
#rbSidebar::-webkit-scrollbar{ width: 10px; }
#rbSidebar::-webkit-scrollbar-track{ background: transparent; }
#rbSidebar::-webkit-scrollbar-thumb{
  background: rgba(148,208,236,.25);
  border-radius: 8px;
  border: 2px solid transparent;
  background-clip: padding-box;
}

/* ---------- Misc Bootstrap harmonization ---------- */
#rbSidebar .list-unstyled{ margin: 0; }
#rbSidebar .accordion{ --bs-accordion-bg: transparent; --bs-accordion-border-color: transparent; }

/* ---------- Z-index sanity (header is 1100) ---------- */
#rbSidebar{ z-index: 1098; }

/* ---------- Desktop spacing between rail and content (optional helper)
   Note: prefer adding padding-left on your <main class="rb-main"> from layout.css
----------------------------------------------------------------------------- */
/* (kept empty here to avoid styling main) */
