/* ===================== RB Stores â€” Sidebar (STRICTLY SCOPED) ===================== */
[data-rb-scope="sidebar"] {
  --rb-sb-w: 280px;
  --rb-header-h: 68px;
  --rb-footer-h: 0px;

  --rb-sb-bg: #0f172a;
  --rb-sb-bg-soft: #0b1222;
  --rb-sb-text: #cbd5e1;
  --rb-sb-text-dim: #96a6c6;
  --rb-sb-brand: #e5e7eb;
  --rb-sb-border: rgba(148,208,236,.18);
  --rb-sb-hover: rgba(255,255,255,.06);
  --rb-sb-active: #1f2a44;
  --rb-sb-focus: rgba(99,117,255,.38);
  --rb-sb-shadow: 0 10px 30px rgba(0,0,0,.35);
}

[data-rb-scope="sidebar"],
[data-rb-scope="sidebar"] * { box-sizing: border-box; }

/* ---------- Mobile top bar ---------- */
[data-rb-scope="sidebar"] .rb-sb-topbar{
  display:flex; align-items:center; gap:.4rem;
  position: sticky; top:0; z-index:1030;
  padding:.6rem .8rem;
  background:var(--rb-sb-bg);
  color:var(--rb-sb-text);
  border-bottom:1px solid var(--rb-sb-border);
  box-shadow:var(--rb-sb-shadow);
}
[data-rb-scope="sidebar"] .rb-sb-topbar-btn{ color:var(--rb-sb-text); }

/* ---------- Offcanvas base ---------- */
#rbSidebar.rb-sb.offcanvas{
  background:var(--rb-sb-bg);
  color:var(--rb-sb-text);
  width:min(100vw,var(--rb-sb-w));
  border-right:1px solid var(--rb-sb-border);
  box-shadow:var(--rb-sb-shadow);
  background-clip:padding-box;
}
#rbSidebar .offcanvas-header{ border-bottom:1px solid var(--rb-sb-border); color:var(--rb-sb-brand); }
#rbSidebar .offcanvas-title{ font-weight:600; }

/* ---------- Accordion ---------- */
[data-rb-scope="sidebar"] .rb-sb-acc-item{ background:none; border:none; border-bottom:1px solid rgba(255,255,255,.05);}
[data-rb-scope="sidebar"] .rb-sb-acc-btn{ background:none; color:var(--rb-sb-text); padding:.9rem 1rem; border-radius:0; }
[data-rb-scope="sidebar"] .rb-sb-acc-btn:not(.collapsed){ background:var(--rb-sb-bg-soft); color:var(--rb-sb-brand);}
[data-rb-scope="sidebar"] .rb-sb-acc-btn:focus{ box-shadow:0 0 0 .18rem var(--rb-sb-focus);}
[data-rb-scope="sidebar"] .rb-sb-acc-item.show > .accordion-header .rb-sb-acc-btn{ background:var(--rb-sb-bg-soft); color:var(--rb-sb-brand); }

/* ---------- Links ---------- */
[data-rb-scope="sidebar"] .rb-sb-menu>li{display:block;}
[data-rb-scope="sidebar"] .rb-sb-link{
  display:flex; align-items:center; gap:.5rem;
  padding:.65rem 1rem;
  color:var(--rb-sb-text);
  text-decoration:none;
  border-left:3px solid transparent;
}
[data-rb-scope="sidebar"] .rb-sb-link:hover{ background:var(--rb-sb-hover);}
[data-rb-scope="sidebar"] .rb-sb-link:focus-visible{ outline:2px solid var(--rb-sb-focus); outline-offset:-2px;}
[data-rb-scope="sidebar"] .rb-sb-link.active,
[data-rb-scope="sidebar"] .rb-sb-link[aria-current="page"]{
  background:var(--rb-sb-active);
  color:#fff;
  border-left-color:var(--rb-sb-focus);
  font-weight:500;
}

/* ---------- Footer ---------- */
[data-rb-scope="sidebar"] .rb-sb-footer{
  border-top:1px solid var(--rb-sb-border);
  margin-top:auto;
  background:var(--rb-sb-bg-soft);
}
[data-rb-scope="sidebar"] .rb-sb-footer .rb-sb-link{ padding:.6rem .8rem; }

/* ---------- Icons ---------- */
#rbSidebar .accordion-button::after{ filter:invert(1) opacity(.75);}
#rbSidebar .bi{ opacity:.92; }

/* ---------- Desktop rail ---------- */
@media (min-width:1200px){
  [data-rb-scope="sidebar"] .rb-sb-topbar{ display:none; }
  #rbSidebar.offcanvas{
    position:fixed!important;
    transform:none!important;
    visibility:visible!important;
    inset:var(--rb-header-h) auto auto 0;
    width:var(--rb-sb-w);
    height:calc(100vh - var(--rb-header-h) - var(--rb-footer-h));
    border-right:1px solid var(--rb-sb-border);
    z-index:1030;
  }
  .offcanvas-backdrop{ display:none!important; }
  body.has-rail{ overflow-x:hidden; }
  body.has-rail main,
  body.has-rail [data-rb-content]{ margin-left:var(--rb-sb-w); max-width:calc(100% - var(--rb-sb-w)); }
}

/* ---------- Motion ---------- */
@media (prefers-reduced-motion:no-preference){
  #rbSidebar{ will-change:transform; }
}

/* ---------- Edge cases ---------- */
#rbSidebar .offcanvas-body{ overflow-y:auto; -webkit-overflow-scrolling:touch;}
#rbSidebar .rb-sb-menu{ min-width:0; }
