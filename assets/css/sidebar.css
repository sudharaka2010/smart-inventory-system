/* ===================== RB Stores â€” Sidebar (STRICTLY SCOPED) =====================
   Scope guard: ONLY target inside [data-rb-scope="sidebar"] and #rbSidebar
   - Safe for Bootstrap 5.3.x
   - Offcanvas on mobile, FIXED rail on desktop (xl+)
   - Does NOT touch header.php / footer.php / main content
================================================================================== */

/* ---------- Theme tokens (scoped) ---------- */
[data-rb-scope="sidebar"]{
  --rb-sb-w: 280px;                 /* rail width on xl+ */
  --rb-header-h: 68px;              /* exact fixed header height */
  --rb-footer-h: 0px;               /* footer height if fixed; adjust if you use one */

  --rb-sb-bg:#0f172a;               /* slate-900 */
  --rb-sb-bg-soft:#0b1222;          /* deeper */
  --rb-sb-text:#cbd5e1;             /* slate-300 */
  --rb-sb-text-dim:#96a6c6;         /* slate-400/500 */
  --rb-sb-border:rgba(148,208,236,.2);
  --rb-sb-hover:rgba(255,255,255,.06);
  --rb-sb-active:#1f2a44;           /* active row bg */
  --rb-sb-brand:#e5e7eb;

  --rb-sb-shadow: 0 10px 30px rgba(0,0,0,.35);
}

/* ---------- Mobile top bar (hamburger) ---------- */
[data-rb-scope="sidebar"] .rb-sb-topbar{
  display:flex; align-items:center; gap:.25rem;
  position:sticky; top:0; z-index:1030; /* above page content */
  padding:.6rem .8rem; background:var(--rb-sb-bg); color:var(--rb-sb-text);
  border-bottom:1px solid var(--rb-sb-border);
  box-shadow: var(--rb-sb-shadow);
}
[data-rb-scope="sidebar"] .rb-sb-topbar-btn{
  color:var(--rb-sb-text);
}

/* ---------- Base offcanvas ---------- */
#rbSidebar.rb-sb.offcanvas{
  background:var(--rb-sb-bg);
  color:var(--rb-sb-text);
  width: min(100vw, var(--rb-sb-w));
  border-right:1px solid var(--rb-sb-border);
  box-shadow: var(--rb-sb-shadow);
}
#rbSidebar .offcanvas-header{
  border-bottom:1px solid var(--rb-sb-border);
  color:var(--rb-sb-brand);
}
#rbSidebar .offcanvas-title{ font-weight:600; }

/* ---------- Accordion / groups ---------- */
[data-rb-scope="sidebar"] .rb-sb-acc-item{
  background:none; border:none; border-bottom:1px solid rgba(255,255,255,.04);
}
[data-rb-scope="sidebar"] .rb-sb-acc-btn{
  background:none; color:var(--rb-sb-text);
  padding:.9rem 1rem;
  border-radius:0;
  box-shadow:none;
}
[data-rb-scope="sidebar"] .rb-sb-acc-btn:not(.collapsed){
  background-color:var(--rb-sb-bg-soft);
  color:var(--rb-sb-brand);
}
[data-rb-scope="sidebar"] .rb-sb-acc-btn:focus{
  box-shadow: 0 0 0 .2rem rgba(99,117,255,.25);
}

/* ---------- Links list ---------- */
[data-rb-scope="sidebar"] .rb-sb-menu > li{
  display:block;
}
[data-rb-scope="sidebar"] .rb-sb-link{
  display:flex; align-items:center;
  gap:.5rem;
  padding:.65rem 1rem;
  color:var(--rb-sb-text);
  text-decoration:none;
  border-left:3px solid transparent;
}
[data-rb-scope="sidebar"] .rb-sb-link:hover{
  background:var(--rb-sb-hover);
}
[data-rb-scope="sidebar"] .rb-sb-link.active,
[data-rb-scope="sidebar"] .rb-sb-link[aria-current="page"]{
  background:var(--rb-sb-active);
  color:#fff;
  border-left-color:var(--rb-sb-text-dim);
}

/* ---------- Footer area inside the sidebar ---------- */
[data-rb-scope="sidebar"] .rb-sb-footer{
  border-top:1px solid var(--rb-sb-border);
}
[data-rb-scope="sidebar"] .rb-sb-footer .rb-sb-link{
  padding:.6rem .8rem;
}

/* ---------- Offcanvas shadow helper ---------- */
[data-rb-scope="sidebar"] .offcanvas-shadow{
  box-shadow: var(--rb-sb-shadow);
}

/* ================== Desktop rail (xl and up) ================== */
@media (min-width:1200px){
  /* Hide the mobile top bar */
  [data-rb-scope="sidebar"] .rb-sb-topbar{ display:none; }

  /* Turn the offcanvas into a fixed rail */
  #rbSidebar.offcanvas{
    position: fixed !important;
    transform: none !important;
    visibility: visible !important;
    inset: var(--rb-header-h) auto auto 0;             /* top/left */
    width: var(--rb-sb-w);
    height: calc(100vh - var(--rb-header-h) - var(--rb-footer-h));
    border-right:1px solid var(--rb-sb-border);
    z-index:1030; /* below fixed header if header has 1035+ */
  }

  /* No backdrop on desktop */
  .offcanvas-backdrop{ display:none !important; }

  /* Prevent layout shift: when body has the rail, push main content */
  body.has-rail { overflow-x:hidden; } /* stops random horizontal scroll */
  body.has-rail [data-rb-content],
  body.has-rail main{
    margin-left: var(--rb-sb-w);
  }
}

/* ---------- Micro polish ---------- */
#rbSidebar .accordion-button::after{
  filter: invert(1) opacity(.75);
}
#rbSidebar .bi{ opacity:.9; }

/* ---------- Optional: reduce white flash on load ---------- */
@media (prefers-reduced-motion: no-preference){
  #rbSidebar{ will-change: transform; }
}
